window.addEventListener("DOMContentLoaded",async()=>{"use strict";function e(){const e=document.querySelector("div#edit-area");document.documentElement.scrollIntoView(),n(),t();const d=200;a(),setInterval(()=>{a()},d),e.addEventListener("input",()=>{o()&&t()})}function t(){const e=Object.values(r.countdown2).every(e=>""===e.value),t=document.querySelectorAll("div#result-area > div.countdown2");e?t.forEach(e=>e.classList.replace("shown","hidden")):t.forEach(e=>e.classList.replace("hidden","shown")),d();for(const e of["countdown1","countdown2"])for(const t of["name","nameText"])u[e][t].textContent=l[e][t]}function n(){r.forEach((e,t)=>{e.forEach((e,n)=>{e.value=c[t][n]})})}function o(){let e=!0;return r.forEach((t,n)=>{t.forEach((t,o)=>{const d=t.value,a=t.validity;t.setCustomValidity(""),a.valid?l[n][o]="date"===o&&""===d?c[n][o]:d:(e=!1,t.setCustomValidity("invalid"),a.badInput?t.setCustomValidity("invalid: badInput"):a.valueMissing?t.setCustomValidity("invalid: valueMissing"):a.tooLong?t.setCustomValidity("invalid: tooLong"):a.tooShort&&t.setCustomValidity("invalid: tooShort"))})}),e}function d(){m=new Date(l.countdown1.date),v=new Date(l.countdown2.date)}function a(){const e=new Date,t=new Date(Math.max(m.getTime()-e.getTime(),0)),n=new Date(Math.max(v.getTime()-e.getTime(),0)),o=Math.trunc(t.getTime()/i.TIME.MSEC_PAR_DAY),d=Math.trunc(n.getTime()/i.TIME.MSEC_PAR_DAY);u.countdown1.day.textContent=String(o).padStart(2,"0"),u.countdown1.time.textContent=t.toISOStringSlice("hh:mm:ss"),u.countdown2.day.textContent=String(d).padStart(2,"0"),u.countdown2.time.textContent=n.toISOStringSlice("hh:mm:ss"),u.live.day.textContent=e.localDate().toISOStringSlice("MM-DD"),u.live.time.textContent=e.localDate().toISOStringSlice("hh:mm:ss")}const i=await import("../library/library.min.js"),u=i.deepFreeze({countdown1:{name:document.querySelector("div#result-area > div.countdown1 > div.name"),nameText:document.querySelector("div#result-area > div.countdown1 > div.name-text"),day:document.querySelector("div#result-area > div.countdown1 > div.day"),time:document.querySelector("div#result-area > div.countdown1 > div.time")},countdown2:{name:document.querySelector("div#result-area > div.countdown2 > div.name"),nameText:document.querySelector("div#result-area > div.countdown2 > div.name-text"),day:document.querySelector("div#result-area > div.countdown2 > div.day"),time:document.querySelector("div#result-area > div.countdown2 > div.time")},live:{name:document.querySelector("div#result-area > div.live > div.name"),nameText:document.querySelector("div#result-area > div.live > div.name-text"),day:document.querySelector("div#result-area > div.live > div.day"),time:document.querySelector("div#result-area > div.live > div.time")}}),r=i.deepFreeze({countdown1:{name:document.querySelector("div#edit-area li.countdown1 > input#name1"),nameText:document.querySelector("div#edit-area li.countdown1 > input#name-text1"),date:document.querySelector("div#edit-area li.countdown1 > input#date1")},countdown2:{name:document.querySelector("div#edit-area li.countdown2 > input#name2"),nameText:document.querySelector("div#edit-area li.countdown2 > input#name-text2"),date:document.querySelector("div#edit-area li.countdown2 > input#date2")}}),c=i.deepFreeze({countdown1:{name:"TODO名1",nameText:"TODO-name1",date:(new Date).localDate().toISOStringSlice("YYYY-MM-DDThh:mm:ss")},countdown2:{name:"TODO名2",nameText:"TODO-name2",date:(new Date).localDate().toISOStringSlice("YYYY-MM-DDThh:mm:ss")}});let l=window.structuredClone(c),m=new Date,v=new Date;e()});